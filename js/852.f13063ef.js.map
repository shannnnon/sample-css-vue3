{"version":3,"file":"js/852.f13063ef.js","mappings":"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","sources":["webpack://sample-css-vue3/./node_modules/vue-progressive-image/dist/vue-progressive-image.es.js","webpack://sample-css-vue3/./src/views/BlurryLoadingImg.vue"],"sourcesContent":["import { ref, computed, isRef, nextTick, watch, onMounted, onUnmounted, openBlock, createElementBlock, normalizeClass, unref, normalizeStyle, createElementVNode, createVNode, Transition, withCtx, withDirectives, vShow, createCommentVNode, createBlock, renderSlot } from \"vue\";\nvar style = \"\";\nconst MAIN_IMAGE_LOAD_SUCCESS = \"success\";\nconst MAIN_IMAGE_LOAD_ERROR = \"error\";\nconst IMAGE_POLL_INTERVAL = 10;\nconst IMAGE_ASPECT_RATIO = 0.5625;\nconst INTERSECTION_THRESHOLD = 0.2;\nconst useImage = (element) => {\n  const image = new Image();\n  const width = ref(0);\n  const height = ref(0);\n  const aspectRatio = computed(() => {\n    return width.value ? height.value / width.value : IMAGE_ASPECT_RATIO;\n  });\n  const pollImageData = setInterval(() => {\n    if (image && image.width) {\n      clearInterval(pollImageData);\n      width.value = image.width;\n      height.value = image.height;\n    }\n  }, IMAGE_POLL_INTERVAL);\n  const imageRenderer = (imageNode) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    canvas.setAttribute(\"hidden\", true);\n    document.body.appendChild(canvas);\n    canvas.getContext(\"2d\").drawImage(imageNode, 0, 0);\n    document.body.removeChild(canvas);\n  };\n  const loadImage = () => {\n    const imageNode = isRef(element) ? element.value : element;\n    const src = imageNode.src;\n    image.src = src;\n    if (image.complete) {\n      return Promise.resolve();\n    }\n    return new Promise((resolve, reject) => {\n      image.onload = () => {\n        imageRenderer(imageNode);\n        nextTick(resolve);\n      };\n      image.onerror = reject;\n    });\n  };\n  return {\n    width,\n    height,\n    aspectRatio,\n    loadImage\n  };\n};\nconst useIntersect = (element) => {\n  const isIntersected = ref(false);\n  const options = { threshold: INTERSECTION_THRESHOLD };\n  const observer = new IntersectionObserver((entries) => {\n    if (entries[0].isIntersecting) {\n      isIntersected.value = true;\n      observer.disconnect();\n    }\n  }, options);\n  const watchIntersectionOnce = (callback) => {\n    const stop = watch(isIntersected, (is) => {\n      if (is) {\n        nextTick().then(callback);\n        stop();\n      }\n    }, { immediate: true });\n  };\n  onMounted(() => {\n    const el = isRef(element) ? element.value : element;\n    observer.observe(el);\n  });\n  onUnmounted(() => {\n    observer.disconnect();\n  });\n  return {\n    watchIntersectionOnce,\n    isIntersected\n  };\n};\nconst _hoisted_1 = [\"src\", \"alt\", \"title\"];\nconst _hoisted_2 = [\"loading\", \"src\"];\nconst _hoisted_3 = {\n  key: 1,\n  class: \"v-progressive-image-slot-default\"\n};\nconst _sfc_main = {\n  props: {\n    src: String,\n    placeholderSrc: String,\n    fallbackSrc: String,\n    alt: String,\n    title: String,\n    customClass: String,\n    blur: [Number, String],\n    lazyPlaceholder: {\n      type: Boolean,\n      default: false\n    },\n    delay: {\n      type: [Number, String],\n      default: 0\n    },\n    objectCover: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [MAIN_IMAGE_LOAD_SUCCESS, MAIN_IMAGE_LOAD_ERROR],\n  setup(__props, { emit }) {\n    const props = __props;\n    const rootRef = ref(null);\n    const imageRef = ref(null);\n    const isMainImageRendered = ref(false);\n    const isFallbackImageRendered = ref(false);\n    const { isIntersected, watchIntersectionOnce } = useIntersect(rootRef);\n    const { loadImage, aspectRatio, width } = useImage(imageRef);\n    const isLoading = computed(() => !isMainImageRendered.value);\n    const paddingHack = computed(() => ({\n      paddingBottom: `${aspectRatio.value * 100}%`\n    }));\n    const componentStyle = computed(() => {\n      if (props.objectCover || width.value === 0) {\n        return;\n      }\n      return {\n        maxWidth: `${width.value}px`\n      };\n    });\n    const imageClasses = computed(() => {\n      return [\n        props.customClass,\n        {\n          \"v-progressive-image-object-cover\": props.objectCover,\n          \"v-progressive-image-loading\": isLoading.value\n        }\n      ];\n    });\n    const mainImageHandler = () => {\n      loadImage().then(() => {\n        setTimeout(() => {\n          isMainImageRendered.value = true;\n          emit(MAIN_IMAGE_LOAD_SUCCESS);\n        }, props.delay * 1);\n      }).catch((error) => {\n        isMainImageRendered.value = true;\n        isFallbackImageRendered.value = true;\n        emit(MAIN_IMAGE_LOAD_ERROR, error);\n      });\n    };\n    onMounted(() => {\n      if (props.placeholderSrc && props.blur) {\n        document.documentElement.style.setProperty(\"--progressive-image-blur\", `${props.blur * 1}px`);\n      }\n      if (props.src) {\n        watchIntersectionOnce(mainImageHandler);\n      }\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        ref_key: \"rootRef\",\n        ref: rootRef,\n        class: normalizeClass([\"v-progressive-image\", unref(imageClasses)]),\n        style: normalizeStyle(unref(componentStyle))\n      }, [\n        createElementVNode(\"div\", {\n          style: normalizeStyle(unref(paddingHack))\n        }, [\n          createVNode(Transition, {\n            css: !__props.placeholderSrc,\n            name: \"v-progressive-image-main-fade\",\n            appear: \"\"\n          }, {\n            default: withCtx(() => [\n              unref(isIntersected) ? withDirectives((openBlock(), createElementBlock(\"img\", {\n                key: 0,\n                ref_key: \"imageRef\",\n                ref: imageRef,\n                class: \"v-progressive-image-main\",\n                src: isFallbackImageRendered.value ? __props.fallbackSrc : __props.src,\n                alt: __props.alt,\n                title: __props.title\n              }, null, 8, _hoisted_1)), [\n                [vShow, isMainImageRendered.value]\n              ]) : createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }, 8, [\"css\"]),\n          __props.placeholderSrc ? (openBlock(), createBlock(Transition, {\n            key: 0,\n            name: \"v-progressive-image-placeholder-fade\",\n            appear: \"\"\n          }, {\n            default: withCtx(() => [\n              unref(isLoading) ? (openBlock(), createElementBlock(\"img\", {\n                key: 0,\n                class: \"v-progressive-image-placeholder\",\n                loading: __props.lazyPlaceholder ? \"lazy\" : \"eager\",\n                src: __props.placeholderSrc\n              }, null, 8, _hoisted_2)) : createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          })) : createCommentVNode(\"\", true),\n          _ctx.$slots.default ? (openBlock(), createElementBlock(\"div\", _hoisted_3, [\n            renderSlot(_ctx.$slots, \"default\", { isLoading: unref(isLoading) })\n          ])) : createCommentVNode(\"\", true)\n        ], 4)\n      ], 6);\n    };\n  }\n};\nconst install = (app, props = {}) => {\n  Object.keys(props).forEach((key) => {\n    _sfc_main.props[key].default = props[key];\n  });\n  app.component(\"ProgressiveImage\", _sfc_main);\n};\nexport { _sfc_main as ProgressiveImage, install as default, install };\n","import script from \"./BlurryLoadingImg.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BlurryLoadingImg.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["MAIN_IMAGE_LOAD_SUCCESS","MAIN_IMAGE_LOAD_ERROR","IMAGE_POLL_INTERVAL","IMAGE_ASPECT_RATIO","INTERSECTION_THRESHOLD","useImage","element","image","Image","width","ref","height","aspectRatio","computed","value","pollImageData","setInterval","clearInterval","imageRenderer","imageNode","canvas","document","createElement","setAttribute","body","appendChild","getContext","drawImage","removeChild","loadImage","isRef","src","complete","Promise","resolve","reject","onload","nextTick","onerror","useIntersect","isIntersected","options","threshold","observer","IntersectionObserver","entries","isIntersecting","disconnect","watchIntersectionOnce","callback","stop","watch","is","then","immediate","onMounted","el","observe","onUnmounted","_hoisted_1","_hoisted_2","_hoisted_3","key","class","_sfc_main","props","String","placeholderSrc","fallbackSrc","alt","title","customClass","blur","Number","lazyPlaceholder","type","Boolean","default","delay","objectCover","emits","setup","__props","emit","rootRef","imageRef","isMainImageRendered","isFallbackImageRendered","isLoading","paddingHack","paddingBottom","componentStyle","maxWidth","imageClasses","mainImageHandler","setTimeout","catch","error","documentElement","style","setProperty","_ctx","_cache","openBlock","createElementBlock","ref_key","normalizeClass","unref","normalizeStyle","createElementVNode","createVNode","Transition","css","name","appear","withCtx","withDirectives","vShow","createCommentVNode","_","createBlock","loading","$slots","renderSlot","__exports__"],"sourceRoot":""}